"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.dechunk = void 0;
const reader_1 = require("./reader");
async function* dechunk(iwaFile) {
    const reader = new reader_1.Uint8ArrayReader(iwaFile);
    while (!reader.eof()) {
        const offset = reader.pos;
        const snappyFirstByte = reader.readUint8();
        if (snappyFirstByte !== 0) {
            throw new Error('Invalid snappy first byte, must be zero.');
        }
        const chunkLength = reader.readUint24();
        yield {
            offset,
            data: reader.readBytes(chunkLength).slice(),
            originalLength: chunkLength + 4
        };
    }
}
exports.dechunk = dechunk;
//# sourceMappingURL=dechunk.js.map