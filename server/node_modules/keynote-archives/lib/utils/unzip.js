"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.isIwaFile = exports.unzip = void 0;
const JSZip = require("jszip");
const constants_1 = require("./constants");
async function* unzip(data) {
    const content = await JSZip.loadAsync(data);
    let index = 0;
    const entries = Object.entries(content.files);
    for (const [name, file] of entries) {
        const data = await file.async('uint8array');
        yield { name, data, index, maximum: entries.length };
        index++;
    }
}
exports.unzip = unzip;
function isIwaFile(name) {
    return name.startsWith(constants_1.INDEX_DIR) && name.endsWith('.iwa');
}
exports.isIwaFile = isIwaFile;
//# sourceMappingURL=unzip.js.map